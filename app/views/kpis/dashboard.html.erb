<div class="max-w-7xl mx-auto px-4 py-10">
  <h1 class="text-3xl font-bold text-gray-800 mb-6">ðŸ“Š KPI Dashboard for "<%= @survey.title %>"</h1>

  <!-- Average Scores -->
  <div class="mb-8">
    <h2 class="text-xl font-semibold text-gray-700 mb-2">1. Average Score per Category</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <% @avg_scores.each do |score| %>
        <div class="bg-white shadow rounded-lg p-4 border">
          <p class="text-gray-600 font-medium"><%= score.name %></p>
          <p class="text-2xl font-bold text-indigo-600"><%= score.avg_score.round(2) %>%</p>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Engagement Index -->
  <div class="mb-8">
    <h2 class="text-xl font-semibold text-gray-700 mb-2">2. Employee Engagement Index</h2>
    <table class="min-w-full bg-white rounded-xl overflow-hidden shadow">
      <thead class="bg-gray-100 text-gray-600 uppercase text-sm">
        <tr>
          <th class="px-6 py-3 text-left">User ID</th>
          <th class="px-6 py-3 text-left">Engagement Score (%)</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        <% @engagement_index.each do |row| %>
          <tr>
            <td class="px-6 py-4"><%= row.user_id %></td>
            <td class="px-6 py-4"><%= row.engagement_score.round(2) %>%</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <!-- Performance Brackets -->
  <div class="mb-8">
    <h2 class="text-xl font-semibold text-gray-700 mb-2">3. Performance Brackets (%)</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <% @performance_brackets.each do |label, value| %>
        <div class="bg-white p-4 shadow rounded-lg text-center">
          <p class="text-sm text-gray-500 uppercase"><%= label %></p>
          <p class="text-2xl font-bold text-green-600"><%= value %>%</p>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Category Comparison -->
  <div class="mb-8">
    <h2 class="text-xl font-semibold text-gray-700 mb-2">4. Category Score Comparison</h2>
    <table class="min-w-full bg-white rounded-xl overflow-hidden shadow">
      <thead class="bg-gray-100 text-gray-600 uppercase text-sm">
        <tr>
          <th class="px-6 py-3 text-left">Category</th>
          <th class="px-6 py-3 text-left">Min</th>
          <th class="px-6 py-3 text-left">Max</th>
          <th class="px-6 py-3 text-left">Avg</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        <% @category_comparison.each do |category, stats| %>
          <tr>
            <td class="px-6 py-4 font-medium"><%= category %></td>
            <td class="px-6 py-4"><%= stats[:min_score] %>%</td>
            <td class="px-6 py-4"><%= stats[:max_score] %>%</td>
            <td class="px-6 py-4"><%= stats[:avg_score] %>%</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <!-- Dynamic Thresholds -->
  <div class="mb-8">
    <h2 class="text-xl font-semibold text-gray-700 mb-2">5. Dynamic Classification Thresholds</h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <% @dynamic_thresholds.each do |label, value| %>
        <div class="bg-white p-4 shadow rounded-lg text-center">
          <p class="text-sm text-gray-500 uppercase"><%= label.to_s.titleize %></p>
          <p class="text-2xl font-bold text-blue-600"><%= value %>%</p>
        </div>
      <% end %>
    </div>
  </div>
</div>
